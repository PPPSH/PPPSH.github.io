---
layout: single
title: "#7. 수집요구사항"
categories: hadoop-pjt
tag: [pjt]
#toc: true 
author_profile: false
sidebar:
    nav: "docs"
---

### 1.수집 요구사항




| **수집 요구사항**                                            | 해결방안                                                     |
| :----------------------------------------------------------- | ------------------------------------------------------------ |
| 1. 스마트카로부터 로그 파일들이 주기적으로 발생              | 플럼 활용, 배치 파일 및 실시간 로그 파일을 수집              |
| **2. 스마트카의 배치 로그 파일 이벤트를 감지**               | 플럼 Source 컴포넌트 중 SpoolDir를 이용해 주기적인 로그 파일 발생 이벤트 감지 |
| **3. 스마트카의 실시간 로그 발생 이벤트 감지**               | 플럼 Source 컴포넌트 중 Exec-Tail을 이용해 특정 로그 파일에서 로그 생성 이벤트 감지 |
| 4. 스마트카가 발생시키는 가바지 데이터                       | 플럼의 Interceptor이용해 정상 패턴의 데이터만 필터링         |
| 5. 수집도중 장애 발생시 안전하게 보관 및 재처리              | 플럼 메모리Channel 및 카프카 Broker 사용으로 로컬 디스크에 임시 저장 |
| 6. 스마트카의 실시간 로그 파일은 비동기 처리로 빠른 수집 처리 | 플럼의 카프카 Sink컴포넌트 활용해 카프카 Topic에 비동기 전송 |





<br>

### 2.수집 아키텍처

![수집아키텍처](../../images/2022-08-15-7-pjt-수집-아키텍처/수집아키텍처.PNG)

####  배치 데이터

+ 3초 간격으로 발생,  차량 상태 정보 100MB/1일 , 일 단위 수집
+ 일자별 Log파일명 상이, 해당 폴더 이벤트 발생 체크 필요
+ 플럼의 **SpoolDir Source** 활용 

<br>

#### 실시간 데이터 

+ 1초간격 발생, 400KB/1초 , 실시간 수집 
+ 하나의 log파일에 누적되어 적재 
+ 플럼의 **Exec-Tail Source**활용
